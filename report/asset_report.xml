<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data noupdate="1">

    <!-- Paper Format — exact 50×25 mm, zero margins -->
    <record id="paperformat_zebra_label" model="report.paperformat">
      <field name="name">Zebra Label 50x25</field>
      <field name="format">custom</field>
      <field name="page_height">25</field>
      <field name="page_width">50</field>
      <field name="orientation">Portrait</field>
      <field name="margin_top">0</field>
      <field name="margin_bottom">0</field>
      <field name="margin_left">0</field>
      <field name="margin_right">0</field>
      <field name="header_spacing">0</field>
      <field name="dpi">203</field>
      <field name="default" eval="False"/>
    </record>

    <record id="action_report_asset_qrcode" model="ir.actions.report">
      <field name="name">Print Labels (Zebra)</field>
      <field name="model">asset.asset</field>
      <field name="report_type">qweb-html</field>
      <field name="report_name">qr_assets.report_asset_zebra</field>
      <field name="report_file">qr_assets.report_asset_zebra</field>
      <field name="paperformat_id" ref="paperformat_zebra_label"/>
      <field name="binding_model_id" ref="model_asset_asset"/>
      <field name="binding_type">report</field>
      <field name="print_report_name">'Label - %s' % (object.id)</field>
    </record>

    <template id="report_asset_zebra">
      <t t-call="web.basic_layout">
        <t t-foreach="docs" t-as="o">

          <div class="page zebra-label">

            <!-- Inline style on the flex container = Odoo cannot override it -->
            <div class="sticker-canvas"
                 style="display:flex !important; flex-direction:row !important; width:50mm !important; height:25mm !important; margin:0 !important; padding:1mm !important; box-sizing:border-box !important; line-height:normal !important;">

              <!-- LEFT: QR Code -->
              <div style="width:50% !important; display:flex !important; align-items:center !important; justify-content:center !important;">
                <img t-if="o.qr_image"
                     t-att-src="image_data_uri(o.qr_image)"
                     style="width:24mm !important; height:24mm !important; object-fit:contain !important;"/>
              </div>

              <!-- RIGHT: Logo + Asset ID -->
              <div style="width:50% !important; display:flex !important; flex-direction:column !important; align-items:center !important; justify-content:center !important; gap:2mm !important; text-align:center !important;">
                <img t-if="o.company_id.logo"
                     t-att-src="image_data_uri(o.company_id.logo)"
                     style="max-width:15mm !important; max-height:8mm !important; object-fit:contain !important; "/>
                <div style="font-family:Arial,sans-serif !important; font-size:8pt !important; font-weight:bold !important; line-height:normal !important; margin:0 !important;">
                  <t t-esc="o.id"/>
                </div>
              </div>

            </div>

            <!-- Override Odoo styles — placed AFTER content so it loads last -->
            <style>
              @page { size: 50mm 25mm; margin: 0 !important; }

              * { box-sizing: border-box; }

              html, body,
              #wrapwrap,
              #wrapwrap > main,
              .o_report_layout,
              .o_body_html,
              .container {
                margin:      0 !important;
                padding:     0 !important;
                max-width:   none !important;
                width:       50mm !important;
                line-height: normal !important;
              }

              .page {
                display:          block !important;
                margin:           0 !important;
                padding:          0 !important;
                width:            50mm !important;
                height:           25mm !important;
                overflow:         hidden !important;
                page-break-after: always;
              }
            </style>

          </div>
        </t>
      </t>
    </template>

  </data>
</odoo>